"use strict";(self.webpackChunkreels_app=self.webpackChunkreels_app||[]).push([[963],{963:(t,e,s)=>{s.r(e),s.d(e,{SSAParser:()=>f,default:()=>k});var a=s(379),i=s(705),l=s(569);const r=/^Format:[\s\t]*/,n=/^Style:[\s\t]*/,c=/^Dialogue:[\s\t]*/,o=/[\s\t]*,[\s\t]*/,h=/\{[^}]+\}/g,u=/\\N/g,p=/^\[(.*)[\s\t]?Styles\]$/,d=/^\[(.*)[\s\t]?Events\]$/;class f{constructor(){(0,i.A)(this,"h",void 0),(0,i.A)(this,"O",0),(0,i.A)(this,"c",null),(0,i.A)(this,"l",[]),(0,i.A)(this,"m",[]),(0,i.A)(this,"N",null),(0,i.A)(this,"f",void 0),(0,i.A)(this,"P",{})}async init(t){this.h=t,t.errors&&(this.f=(await s.e(99).then(s.bind(s,99))).ParseErrorBuilder)}parse(t,e){if(this.O)switch(this.O){case 1:if(""===t)this.O=0;else if(n.test(t))if(this.N){const e=t.replace(n,"").split(o);this.S(e)}else{var s;this.g(null===(s=this.f)||void 0===s?void 0:s.T("Style",e))}else r.test(t)?this.N=t.replace(r,"").split(o):d.test(t)&&(this.N=null,this.O=2);break;case 2:if(""===t)this.Q();else if(c.test(t))if(this.Q(),this.N){const s=t.replace(c,"").split(o),a=this.U(s,e);a&&(this.c=a)}else{var a;this.g(null===(a=this.f)||void 0===a?void 0:a.T("Dialogue",e))}else this.c?this.c.text+="\n"+t.replace(h,"").replace(u,"\n"):r.test(t)?this.N=t.replace(r,"").split(o):p.test(t)?(this.N=null,this.O=1):d.test(t)&&(this.N=null)}else""===t||(p.test(t)?(this.N=null,this.O=1):d.test(t)&&(this.N=null,this.O=2))}done(){return{metadata:{},cues:this.l,regions:[],errors:this.m}}Q(){var t,e;this.c&&(this.l.push(this.c),null===(t=(e=this.h).onCue)||void 0===t||t.call(e,this.c),this.c=null)}S(t){let e,s,a,i,l="Default",r={},n="center",c="bottom",o=1.2,h=3,u=[];for(let p=0;p<this.N.length;p++){const d=this.N[p],f=t[p];switch(d){case"Name":l=f;break;case"Fontname":r["font-family"]=f;break;case"Fontsize":r["font-size"]="calc(".concat(f," / var(--overlay-height))");break;case"PrimaryColour":const t=g(f);t&&(r["--cue-color"]=t);break;case"BorderStyle":h=parseInt(f,10);break;case"BackColour":i=g(f);break;case"OutlineColour":const p=g(f);p&&(a=p);break;case"Bold":parseInt(f)&&(r["font-weight"]="bold");break;case"Italic":parseInt(f)&&(r["font-style"]="italic");break;case"Underline":parseInt(f)&&(r["text-decoration"]="underline");break;case"StrikeOut":parseInt(f)&&(r["text-decoration"]="line-through");break;case"Spacing":r["letter-spacing"]=f+"px";break;case"AlphaLevel":r.opacity=parseFloat(f);break;case"ScaleX":u.push("scaleX(".concat(parseFloat(f)/100,")"));break;case"ScaleY":u.push("scaleY(".concat(parseFloat(f)/100,")"));break;case"Angle":u.push("rotate(".concat(f,"deg)"));break;case"Shadow":o=1.2*parseInt(f,10);break;case"MarginL":r["--cue-width"]="auto",r["--cue-left"]=parseFloat(f)+"px";break;case"MarginR":r["--cue-width"]="auto",r["--cue-right"]=parseFloat(f)+"px";break;case"MarginV":s=parseFloat(f);break;case"Outline":e=parseInt(f,10);break;case"Alignment":const d=parseInt(f,10);switch(d>=4&&(c=d>=7?"top":"center"),d%3){case 1:n="start";break;case 2:n="center";break;case 3:n="end"}}}if(r.R=c,r["--cue-white-space"]="normal",r["--cue-line-height"]="normal",r["--cue-text-align"]=n,"center"===c?(r["--cue-top"]="50%",u.push("translateY(-50%)")):r["--cue-".concat(c)]=(s||0)+"px",1===h&&(r["--cue-padding-y"]="0"),(1===h||i)&&(r["--cue-bg-color"]=1===h?"none":i),3===h&&a&&(r["--cue-outline"]="".concat(e,"px solid ").concat(a)),1===h&&"number"===typeof e){const t=null!==i&&void 0!==i?i:"#000";r["--cue-text-shadow"]=[a&&b(1.2*e,1.2*o,a),a?b(e*(e/2),o*(e/2),t):b(e,o,t)].filter(Boolean).join(", ")}u.length&&(r["--cue-transform"]=u.join(" ")),this.P[l]=r}U(t,e){const s=this.V(t),i=this.q(s.Start,s.End,e);if(!i)return;const r=new l.b(i[0],i[1],""),n=(0,a.A)({},this.P[s.Style]||{}),c=s.Name?"<v ".concat(s.Name,">"):"",o=n.R,p=s.MarginL&&parseFloat(s.MarginL),d=s.MarginR&&parseFloat(s.MarginR),f=s.MarginV&&parseFloat(s.MarginV);return p&&(n["--cue-width"]="auto",n["--cue-left"]=p+"px"),d&&(n["--cue-width"]="auto",n["--cue-right"]=d+"px"),f&&"center"!==o&&(n["--cue-".concat(o)]=f+"px"),r.text=c+t.slice(this.N.length-1).join(", ").replace(h,"").replace(u,"\n"),delete n.R,Object.keys(n).length&&(r.style=n),r}V(t){const e={};for(let s=0;s<this.N.length;s++)e[this.N[s]]=t[s];return e}q(t,e,s){const a=(0,l.p)(t),i=(0,l.p)(e);if(null!==a&&null!==i&&i>a)return[a,i];var r,n,c;null===a&&this.g(null===(r=this.f)||void 0===r?void 0:r.s(t,s)),null===i&&this.g(null===(n=this.f)||void 0===n?void 0:n.t(e,s)),null!=a&&null!==i&&i>a&&this.g(null===(c=this.f)||void 0===c?void 0:c.u(a,i,s))}g(t){if(t){if(this.m.push(t),this.h.strict)throw this.h.cancel(),t;var e,s;null===(e=(s=this.h).onError)||void 0===e||e.call(s,t)}}}function g(t){const e=parseInt(t.replace("&H",""),16);if(e>=0){return"rgba("+[255&e,e>>8&255,e>>16&255,(e>>24&255^255)/255].join(",")+")"}return null}function b(t,e,s){const a=Math.ceil(2*Math.PI*t);let i="";for(let l=0;l<a;l++){const r=2*Math.PI*l/a;i+=t*Math.cos(r)+"px "+e*Math.sin(r)+"px 0 "+s+(l==a-1?"":",")}return i}function k(){return new f}}}]);
//# sourceMappingURL=963.223790e8.chunk.js.map