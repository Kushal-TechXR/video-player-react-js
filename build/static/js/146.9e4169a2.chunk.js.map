{"version":3,"file":"static/js/146.9e4169a2.chunk.js","mappings":"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","sources":["../node_modules/@vidstack/react/prod/chunks/vidstack-BeT6vBOi.js"],"sourcesContent":["\"use client\"\n\nimport { listenEvent, effect, untrack, createScope, keysOf, onDispose, DOMEvent, peek } from './vidstack-CZgUA94N.js';\nimport { ListSymbol, TimeRange, RAFLoop } from './vidstack-D5Pzx_k5.js';\nimport { getCastSessionMedia, getCastContext, getCastSession, hasActiveCastSession, listenCastContextEvent, getCastErrorMessage } from './vidstack-CQQ1xKSy.js';\nimport 'react';\nimport '@floating-ui/dom';\n\nclass GoogleCastMediaInfoBuilder {\n  #info;\n  constructor(src) {\n    this.#info = new chrome.cast.media.MediaInfo(src.src, src.type);\n  }\n  build() {\n    return this.#info;\n  }\n  setStreamType(streamType) {\n    if (streamType.includes(\"live\")) {\n      this.#info.streamType = chrome.cast.media.StreamType.LIVE;\n    } else {\n      this.#info.streamType = chrome.cast.media.StreamType.BUFFERED;\n    }\n    return this;\n  }\n  setTracks(tracks) {\n    this.#info.tracks = tracks.map(this.#buildCastTrack);\n    return this;\n  }\n  setMetadata(title, poster) {\n    this.#info.metadata = new chrome.cast.media.GenericMediaMetadata();\n    this.#info.metadata.title = title;\n    this.#info.metadata.images = [{ url: poster }];\n    return this;\n  }\n  #buildCastTrack(track, trackId) {\n    const castTrack = new chrome.cast.media.Track(trackId, chrome.cast.media.TrackType.TEXT);\n    castTrack.name = track.label;\n    castTrack.trackContentId = track.src;\n    castTrack.trackContentType = \"text/vtt\";\n    castTrack.language = track.language;\n    castTrack.subtype = track.kind.toUpperCase();\n    return castTrack;\n  }\n}\n\nclass GoogleCastTracksManager {\n  #cast;\n  #ctx;\n  #onNewLocalTracks;\n  constructor(cast, ctx, onNewLocalTracks) {\n    this.#cast = cast;\n    this.#ctx = ctx;\n    this.#onNewLocalTracks = onNewLocalTracks;\n  }\n  setup() {\n    const syncRemoteActiveIds = this.syncRemoteActiveIds.bind(this);\n    listenEvent(this.#ctx.audioTracks, \"change\", syncRemoteActiveIds);\n    listenEvent(this.#ctx.textTracks, \"mode-change\", syncRemoteActiveIds);\n    effect(this.#syncLocalTracks.bind(this));\n  }\n  getLocalTextTracks() {\n    return this.#ctx.$state.textTracks().filter((track) => track.src && track.type === \"vtt\");\n  }\n  #getLocalAudioTracks() {\n    return this.#ctx.$state.audioTracks();\n  }\n  #getRemoteTracks(type) {\n    const tracks = this.#cast.mediaInfo?.tracks ?? [];\n    return type ? tracks.filter((track) => track.type === type) : tracks;\n  }\n  #getRemoteActiveIds() {\n    const activeIds = [], activeLocalAudioTrack = this.#getLocalAudioTracks().find((track) => track.selected), activeLocalTextTracks = this.getLocalTextTracks().filter((track) => track.mode === \"showing\");\n    if (activeLocalAudioTrack) {\n      const remoteAudioTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.AUDIO), remoteAudioTrack = this.#findRemoteTrack(remoteAudioTracks, activeLocalAudioTrack);\n      if (remoteAudioTrack) activeIds.push(remoteAudioTrack.trackId);\n    }\n    if (activeLocalTextTracks?.length) {\n      const remoteTextTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.TEXT);\n      if (remoteTextTracks.length) {\n        for (const localTrack of activeLocalTextTracks) {\n          const remoteTextTrack = this.#findRemoteTrack(remoteTextTracks, localTrack);\n          if (remoteTextTrack) activeIds.push(remoteTextTrack.trackId);\n        }\n      }\n    }\n    return activeIds;\n  }\n  #syncLocalTracks() {\n    const localTextTracks = this.getLocalTextTracks();\n    if (!this.#cast.isMediaLoaded) return;\n    const remoteTextTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.TEXT);\n    for (const localTrack of localTextTracks) {\n      const hasRemoteTrack = this.#findRemoteTrack(remoteTextTracks, localTrack);\n      if (!hasRemoteTrack) {\n        untrack(() => this.#onNewLocalTracks?.());\n        break;\n      }\n    }\n  }\n  syncRemoteTracks(event) {\n    if (!this.#cast.isMediaLoaded) return;\n    const localAudioTracks = this.#getLocalAudioTracks(), localTextTracks = this.getLocalTextTracks(), remoteAudioTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.AUDIO), remoteTextTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.TEXT);\n    for (const remoteAudioTrack of remoteAudioTracks) {\n      const hasLocalTrack = this.#findLocalTrack(localAudioTracks, remoteAudioTrack);\n      if (hasLocalTrack) continue;\n      const localAudioTrack = {\n        id: remoteAudioTrack.trackId.toString(),\n        label: remoteAudioTrack.name,\n        language: remoteAudioTrack.language,\n        kind: remoteAudioTrack.subtype ?? \"main\",\n        selected: false\n      };\n      this.#ctx.audioTracks[ListSymbol.add](localAudioTrack, event);\n    }\n    for (const remoteTextTrack of remoteTextTracks) {\n      const hasLocalTrack = this.#findLocalTrack(localTextTracks, remoteTextTrack);\n      if (hasLocalTrack) continue;\n      const localTextTrack = {\n        id: remoteTextTrack.trackId.toString(),\n        src: remoteTextTrack.trackContentId,\n        label: remoteTextTrack.name,\n        language: remoteTextTrack.language,\n        kind: remoteTextTrack.subtype.toLowerCase()\n      };\n      this.#ctx.textTracks.add(localTextTrack, event);\n    }\n  }\n  syncRemoteActiveIds(event) {\n    if (!this.#cast.isMediaLoaded) return;\n    const activeIds = this.#getRemoteActiveIds(), editRequest = new chrome.cast.media.EditTracksInfoRequest(activeIds);\n    this.#editTracksInfo(editRequest).catch((error) => {\n    });\n  }\n  #editTracksInfo(request) {\n    const media = getCastSessionMedia();\n    return new Promise((resolve, reject) => media?.editTracksInfo(request, resolve, reject));\n  }\n  #findLocalTrack(localTracks, remoteTrack) {\n    return localTracks.find((localTrack) => this.#isMatch(localTrack, remoteTrack));\n  }\n  #findRemoteTrack(remoteTracks, localTrack) {\n    return remoteTracks.find((remoteTrack) => this.#isMatch(localTrack, remoteTrack));\n  }\n  // Note: we can't rely on id matching because they will differ between local/remote. A local\n  // track id might not even exist.\n  #isMatch(localTrack, remoteTrack) {\n    return remoteTrack.name === localTrack.label && remoteTrack.language === localTrack.language && remoteTrack.subtype.toLowerCase() === localTrack.kind.toLowerCase();\n  }\n}\n\nclass GoogleCastProvider {\n  $$PROVIDER_TYPE = \"GOOGLE_CAST\";\n  scope = createScope();\n  #player;\n  #ctx;\n  #tracks;\n  #currentSrc = null;\n  #state = \"disconnected\";\n  #currentTime = 0;\n  #played = 0;\n  #seekableRange = new TimeRange(0, 0);\n  #timeRAF = new RAFLoop(this.#onAnimationFrame.bind(this));\n  #playerEventHandlers;\n  #reloadInfo = null;\n  #isIdle = false;\n  constructor(player, ctx) {\n    this.#player = player;\n    this.#ctx = ctx;\n    this.#tracks = new GoogleCastTracksManager(player, ctx, this.#onNewLocalTracks.bind(this));\n  }\n  get type() {\n    return \"google-cast\";\n  }\n  get currentSrc() {\n    return this.#currentSrc;\n  }\n  /**\n   * The Google Cast remote player.\n   *\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.RemotePlayer}\n   */\n  get player() {\n    return this.#player;\n  }\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.CastContext}\n   */\n  get cast() {\n    return getCastContext();\n  }\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.CastSession}\n   */\n  get session() {\n    return getCastSession();\n  }\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/chrome.cast.media.Media}\n   */\n  get media() {\n    return getCastSessionMedia();\n  }\n  /**\n   * Whether the current Google Cast session belongs to this provider.\n   */\n  get hasActiveSession() {\n    return hasActiveCastSession(this.#currentSrc);\n  }\n  setup() {\n    this.#attachCastContextEventListeners();\n    this.#attachCastPlayerEventListeners();\n    this.#tracks.setup();\n    this.#ctx.notify(\"provider-setup\", this);\n  }\n  #attachCastContextEventListeners() {\n    listenCastContextEvent(\n      cast.framework.CastContextEventType.CAST_STATE_CHANGED,\n      this.#onCastStateChange.bind(this)\n    );\n  }\n  #attachCastPlayerEventListeners() {\n    const Event2 = cast.framework.RemotePlayerEventType, handlers = {\n      [Event2.IS_CONNECTED_CHANGED]: this.#onCastStateChange,\n      [Event2.IS_MEDIA_LOADED_CHANGED]: this.#onMediaLoadedChange,\n      [Event2.CAN_CONTROL_VOLUME_CHANGED]: this.#onCanControlVolumeChange,\n      [Event2.CAN_SEEK_CHANGED]: this.#onCanSeekChange,\n      [Event2.DURATION_CHANGED]: this.#onDurationChange,\n      [Event2.IS_MUTED_CHANGED]: this.#onVolumeChange,\n      [Event2.VOLUME_LEVEL_CHANGED]: this.#onVolumeChange,\n      [Event2.IS_PAUSED_CHANGED]: this.#onPausedChange,\n      [Event2.LIVE_SEEKABLE_RANGE_CHANGED]: this.#onProgress,\n      [Event2.PLAYER_STATE_CHANGED]: this.#onPlayerStateChange\n    };\n    this.#playerEventHandlers = handlers;\n    const handler = this.#onRemotePlayerEvent.bind(this);\n    for (const type of keysOf(handlers)) {\n      this.#player.controller.addEventListener(type, handler);\n    }\n    onDispose(() => {\n      for (const type of keysOf(handlers)) {\n        this.#player.controller.removeEventListener(type, handler);\n      }\n    });\n  }\n  async play() {\n    if (!this.#player.isPaused && !this.#isIdle) return;\n    if (this.#isIdle) {\n      await this.#reload(false, 0);\n      return;\n    }\n    this.#player.controller?.playOrPause();\n  }\n  async pause() {\n    if (this.#player.isPaused) return;\n    this.#player.controller?.playOrPause();\n  }\n  getMediaStatus(request) {\n    return new Promise((resolve, reject) => {\n      this.media?.getStatus(request, resolve, reject);\n    });\n  }\n  setMuted(muted) {\n    const hasChanged = muted && !this.#player.isMuted || !muted && this.#player.isMuted;\n    if (hasChanged) this.#player.controller?.muteOrUnmute();\n  }\n  setCurrentTime(time) {\n    this.#player.currentTime = time;\n    this.#ctx.notify(\"seeking\", time);\n    this.#player.controller?.seek();\n  }\n  setVolume(volume) {\n    this.#player.volumeLevel = volume;\n    this.#player.controller?.setVolumeLevel();\n  }\n  async loadSource(src) {\n    if (this.#reloadInfo?.src !== src) this.#reloadInfo = null;\n    if (hasActiveCastSession(src)) {\n      this.#resumeSession();\n      this.#currentSrc = src;\n      return;\n    }\n    this.#ctx.notify(\"load-start\");\n    const loadRequest = this.#buildLoadRequest(src), errorCode = await this.session.loadMedia(loadRequest);\n    if (errorCode) {\n      this.#currentSrc = null;\n      this.#ctx.notify(\"error\", Error(getCastErrorMessage(errorCode)));\n      return;\n    }\n    this.#currentSrc = src;\n  }\n  destroy() {\n    this.#reset();\n    this.#endSession();\n  }\n  #reset() {\n    if (!this.#reloadInfo) {\n      this.#played = 0;\n      this.#seekableRange = new TimeRange(0, 0);\n    }\n    this.#timeRAF.stop();\n    this.#currentTime = 0;\n    this.#reloadInfo = null;\n  }\n  #resumeSession() {\n    const resumeSessionEvent = new DOMEvent(\"resume-session\", { detail: this.session });\n    this.#onMediaLoadedChange(resumeSessionEvent);\n    const { muted, volume, savedState } = this.#ctx.$state, localState = savedState();\n    this.setCurrentTime(Math.max(this.#player.currentTime, localState?.currentTime ?? 0));\n    this.setMuted(muted());\n    this.setVolume(volume());\n    if (localState?.paused === false) this.play();\n  }\n  #endSession() {\n    this.cast.endCurrentSession(true);\n    const { remotePlaybackLoader } = this.#ctx.$state;\n    remotePlaybackLoader.set(null);\n  }\n  #disconnectFromReceiver() {\n    const { savedState } = this.#ctx.$state;\n    savedState.set({\n      paused: this.#player.isPaused,\n      currentTime: this.#player.currentTime\n    });\n    this.#endSession();\n  }\n  #onAnimationFrame() {\n    this.#onCurrentTimeChange();\n  }\n  #onRemotePlayerEvent(event) {\n    this.#playerEventHandlers[event.type].call(this, event);\n  }\n  #onCastStateChange(data) {\n    const castState = this.cast.getCastState(), state = castState === cast.framework.CastState.CONNECTED ? \"connected\" : castState === cast.framework.CastState.CONNECTING ? \"connecting\" : \"disconnected\";\n    if (this.#state === state) return;\n    const detail = { type: \"google-cast\", state }, trigger = this.#createEvent(data);\n    this.#state = state;\n    this.#ctx.notify(\"remote-playback-change\", detail, trigger);\n    if (state === \"disconnected\") {\n      this.#disconnectFromReceiver();\n    }\n  }\n  #onMediaLoadedChange(event) {\n    const hasLoaded = !!this.#player.isMediaLoaded;\n    if (!hasLoaded) return;\n    const src = peek(this.#ctx.$state.source);\n    Promise.resolve().then(() => {\n      if (src !== peek(this.#ctx.$state.source) || !this.#player.isMediaLoaded) return;\n      this.#reset();\n      const duration = this.#player.duration;\n      this.#seekableRange = new TimeRange(0, duration);\n      const detail = {\n        provider: this,\n        duration,\n        buffered: new TimeRange(0, 0),\n        seekable: this.#getSeekableRange()\n      }, trigger = this.#createEvent(event);\n      this.#ctx.notify(\"loaded-metadata\", void 0, trigger);\n      this.#ctx.notify(\"loaded-data\", void 0, trigger);\n      this.#ctx.notify(\"can-play\", detail, trigger);\n      this.#onCanControlVolumeChange();\n      this.#onCanSeekChange(event);\n      const { volume, muted } = this.#ctx.$state;\n      this.setVolume(volume());\n      this.setMuted(muted());\n      this.#timeRAF.start();\n      this.#tracks.syncRemoteTracks(trigger);\n      this.#tracks.syncRemoteActiveIds(trigger);\n    });\n  }\n  #onCanControlVolumeChange() {\n    this.#ctx.$state.canSetVolume.set(this.#player.canControlVolume);\n  }\n  #onCanSeekChange(event) {\n    const trigger = this.#createEvent(event);\n    this.#ctx.notify(\"stream-type-change\", this.#getStreamType(), trigger);\n  }\n  #getStreamType() {\n    const streamType = this.#player.mediaInfo?.streamType;\n    return streamType === chrome.cast.media.StreamType.LIVE ? this.#player.canSeek ? \"live:dvr\" : \"live\" : \"on-demand\";\n  }\n  #onCurrentTimeChange() {\n    if (this.#reloadInfo) return;\n    const currentTime = this.#player.currentTime;\n    if (currentTime === this.#currentTime) return;\n    this.#ctx.notify(\"time-change\", currentTime);\n    if (currentTime > this.#played) {\n      this.#played = currentTime;\n      this.#onProgress();\n    }\n    if (this.#ctx.$state.seeking()) {\n      this.#ctx.notify(\"seeked\", currentTime);\n    }\n    this.#currentTime = currentTime;\n  }\n  #onDurationChange(event) {\n    if (!this.#player.isMediaLoaded || this.#reloadInfo) return;\n    const duration = this.#player.duration, trigger = this.#createEvent(event);\n    this.#seekableRange = new TimeRange(0, duration);\n    this.#ctx.notify(\"duration-change\", duration, trigger);\n  }\n  #onVolumeChange(event) {\n    if (!this.#player.isMediaLoaded) return;\n    const detail = {\n      muted: this.#player.isMuted,\n      volume: this.#player.volumeLevel\n    }, trigger = this.#createEvent(event);\n    this.#ctx.notify(\"volume-change\", detail, trigger);\n  }\n  #onPausedChange(event) {\n    const trigger = this.#createEvent(event);\n    if (this.#player.isPaused) {\n      this.#ctx.notify(\"pause\", void 0, trigger);\n    } else {\n      this.#ctx.notify(\"play\", void 0, trigger);\n    }\n  }\n  #onProgress(event) {\n    const detail = {\n      seekable: this.#getSeekableRange(),\n      buffered: new TimeRange(0, this.#played)\n    }, trigger = event ? this.#createEvent(event) : void 0;\n    this.#ctx.notify(\"progress\", detail, trigger);\n  }\n  #onPlayerStateChange(event) {\n    const state = this.#player.playerState, PlayerState = chrome.cast.media.PlayerState;\n    this.#isIdle = state === PlayerState.IDLE;\n    if (state === PlayerState.PAUSED) return;\n    const trigger = this.#createEvent(event);\n    switch (state) {\n      case PlayerState.PLAYING:\n        this.#ctx.notify(\"playing\", void 0, trigger);\n        break;\n      case PlayerState.BUFFERING:\n        this.#ctx.notify(\"waiting\", void 0, trigger);\n        break;\n      case PlayerState.IDLE:\n        this.#timeRAF.stop();\n        this.#ctx.notify(\"pause\");\n        this.#ctx.notify(\"end\");\n        break;\n    }\n  }\n  #getSeekableRange() {\n    return this.#player.liveSeekableRange ? new TimeRange(this.#player.liveSeekableRange.start, this.#player.liveSeekableRange.end) : this.#seekableRange;\n  }\n  #createEvent(detail) {\n    return detail instanceof Event ? detail : new DOMEvent(detail.type, { detail });\n  }\n  #buildMediaInfo(src) {\n    const { streamType, title, poster } = this.#ctx.$state;\n    return new GoogleCastMediaInfoBuilder(src).setMetadata(title(), poster()).setStreamType(streamType()).setTracks(this.#tracks.getLocalTextTracks()).build();\n  }\n  #buildLoadRequest(src) {\n    const mediaInfo = this.#buildMediaInfo(src), request = new chrome.cast.media.LoadRequest(mediaInfo), savedState = this.#ctx.$state.savedState();\n    request.autoplay = (this.#reloadInfo?.paused ?? savedState?.paused) === false;\n    request.currentTime = this.#reloadInfo?.time ?? savedState?.currentTime ?? 0;\n    return request;\n  }\n  async #reload(paused, time) {\n    const src = peek(this.#ctx.$state.source);\n    this.#reloadInfo = { src, paused, time };\n    await this.loadSource(src);\n  }\n  #onNewLocalTracks() {\n    this.#reload(this.#player.isPaused, this.#player.currentTime).catch((error) => {\n    });\n  }\n}\n\nexport { GoogleCastProvider };\n"],"names":["_info","WeakMap","_GoogleCastMediaInfoBuilder_brand","WeakSet","GoogleCastMediaInfoBuilder","constructor","src","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","_classPrivateFieldSet","this","chrome","cast","media","MediaInfo","type","build","_classPrivateFieldGet","setStreamType","streamType","includes","StreamType","LIVE","BUFFERED","setTracks","tracks","map","_assertClassBrand","_buildCastTrack","setMetadata","title","poster","metadata","GenericMediaMetadata","images","url","track","trackId","castTrack","Track","TrackType","TEXT","name","label","trackContentId","trackContentType","language","subtype","kind","toUpperCase","_cast","_ctx","_onNewLocalTracks","_GoogleCastTracksManager_brand","GoogleCastTracksManager","ctx","onNewLocalTracks","setup","syncRemoteActiveIds","bind","listenEvent","audioTracks","textTracks","effect","_syncLocalTracks","getLocalTextTracks","$state","filter","syncRemoteTracks","event","isMediaLoaded","localAudioTracks","_getLocalAudioTracks","call","localTextTracks","remoteAudioTracks","_getRemoteTracks","AUDIO","remoteTextTracks","remoteAudioTrack","_remoteAudioTrack$sub","_findLocalTrack","localAudioTrack","id","toString","selected","ListSymbol","add","remoteTextTrack","localTextTrack","toLowerCase","activeIds","_getRemoteActiveIds","editRequest","EditTracksInfoRequest","_editTracksInfo","catch","error","_classPrivateFieldGet8","_classPrivateFieldGet9","mediaInfo","activeLocalAudioTrack","find","activeLocalTextTracks","mode","_findRemoteTrack","push","length","localTrack","untrack","_classPrivateFieldGet0","request","getCastSessionMedia","Promise","resolve","reject","editTracksInfo","localTracks","remoteTrack","_isMatch","remoteTracks","_player","_ctx2","_tracks","_currentSrc","_state","_currentTime","_played","_seekableRange","_timeRAF","_playerEventHandlers","_reloadInfo","_isIdle","_GoogleCastProvider_brand","GoogleCastProvider","player","_defineProperty","createScope","TimeRange","RAFLoop","_onAnimationFrame","_onNewLocalTracks2","currentSrc","getCastContext","session","getCastSession","hasActiveSession","hasActiveCastSession","_attachCastContextEventListeners","_attachCastPlayerEventListeners","notify","play","_classPrivateFieldGet2","isPaused","_reload","controller","playOrPause","pause","_classPrivateFieldGet3","getMediaStatus","_this$media","getStatus","setMuted","muted","_classPrivateFieldGet4","isMuted","muteOrUnmute","setCurrentTime","time","_classPrivateFieldGet5","currentTime","seek","setVolume","volume","_classPrivateFieldGet6","volumeLevel","setVolumeLevel","loadSource","_classPrivateFieldGet7","_resumeSession","loadRequest","_buildLoadRequest","errorCode","loadMedia","Error","getCastErrorMessage","destroy","_reset","_endSession","listenCastContextEvent","framework","CastContextEventType","CAST_STATE_CHANGED","_onCastStateChange","Event2","RemotePlayerEventType","handlers","IS_CONNECTED_CHANGED","IS_MEDIA_LOADED_CHANGED","_onMediaLoadedChange","CAN_CONTROL_VOLUME_CHANGED","_onCanControlVolumeChange","CAN_SEEK_CHANGED","_onCanSeekChange","DURATION_CHANGED","_onDurationChange","IS_MUTED_CHANGED","_onVolumeChange","VOLUME_LEVEL_CHANGED","IS_PAUSED_CHANGED","_onPausedChange","LIVE_SEEKABLE_RANGE_CHANGED","_onProgress","PLAYER_STATE_CHANGED","_onPlayerStateChange","handler","_onRemotePlayerEvent","keysOf","addEventListener","onDispose","removeEventListener","stop","_localState$currentTi","resumeSessionEvent","DOMEvent","detail","savedState","localState","Math","max","paused","endCurrentSession","remotePlaybackLoader","set","_disconnectFromReceiver","_onCurrentTimeChange","data","castState","getCastState","state","CastState","CONNECTED","CONNECTING","trigger","_createEvent","peek","source","then","duration","provider","buffered","seekable","_getSeekableRange","start","canSetVolume","canControlVolume","_getStreamType","_classPrivateFieldGet1","canSeek","seeking","playerState","PlayerState","IDLE","PAUSED","PLAYING","BUFFERING","liveSeekableRange","end","Event","_buildMediaInfo","_classPrivateFieldGet10","_classPrivateFieldGet11","_ref","_classPrivateFieldGet12","_classPrivateFieldGet13","LoadRequest","autoplay"],"ignoreList":[],"sourceRoot":""}