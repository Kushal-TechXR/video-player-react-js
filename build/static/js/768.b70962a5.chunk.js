"use strict";(self.webpackChunkreels_app=self.webpackChunkreels_app||[]).push([[768],{768:(t,i,s)=>{s.r(i),s.d(i,{HLSProvider:()=>F});var e=s(379),n=s(790),o=s(705),a=s(149),r=s(562),h=s(558),l=s(458),c=s(180),d=s(408);s(43);var u=new WeakMap,A=new WeakMap,v=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakSet;class k{get instance(){return(0,l.A)(v,this)}constructor(t,i){(0,n.A)(this,g),(0,a.A)(this,u,void 0),(0,a.A)(this,A,void 0),(0,a.A)(this,v,null),(0,a.A)(this,p,null),(0,o.A)(this,"config",{}),(0,a.A)(this,f,new Set),(0,h.A)(u,this,t),(0,h.A)(A,this,i)}setup(t){const{streamType:i}=(0,l.A)(A,this).$state,s=(0,c.se)(i).includes("live"),n=(0,c.se)(i).includes("ll-");(0,h.A)(v,this,new t((0,e.A)({lowLatencyMode:n,backBufferLength:n?4:s?8:void 0,renderTextTracksNatively:!1},this.config)));const o=(0,r.A)(g,this,E).bind(this);for(const e of Object.values(t.Events))(0,l.A)(v,this).on(e,o);(0,l.A)(v,this).on(t.Events.ERROR,(0,r.A)(g,this,P).bind(this));for(const e of(0,l.A)(f,this))e((0,l.A)(v,this));(0,l.A)(A,this).player.dispatch("hls-instance",{detail:(0,l.A)(v,this)}),(0,l.A)(v,this).attachMedia((0,l.A)(u,this)),(0,l.A)(v,this).on(t.Events.AUDIO_TRACK_SWITCHED,(0,r.A)(g,this,L).bind(this)),(0,l.A)(v,this).on(t.Events.LEVEL_SWITCHED,(0,r.A)(g,this,m).bind(this)),(0,l.A)(v,this).on(t.Events.LEVEL_LOADED,(0,r.A)(g,this,M).bind(this)),(0,l.A)(v,this).on(t.Events.LEVEL_UPDATED,(0,r.A)(g,this,W).bind(this)),(0,l.A)(v,this).on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(0,r.A)(g,this,T).bind(this)),(0,l.A)(v,this).on(t.Events.CUES_PARSED,(0,r.A)(g,this,S).bind(this)),(0,l.A)(A,this).qualities[d.kW.enableAuto]=(0,r.A)(g,this,x).bind(this),(0,c.k6)((0,l.A)(A,this).qualities,"change",(0,r.A)(g,this,H).bind(this)),(0,c.k6)((0,l.A)(A,this).audioTracks,"change",(0,r.A)(g,this,I).bind(this)),(0,h.A)(p,this,(0,c.QZ)((0,r.A)(g,this,y).bind(this)))}onInstance(t){return(0,l.A)(f,this).add(t),()=>(0,l.A)(f,this).delete(t)}loadSource(t){var i;(0,c.Kg)(t.src)&&(null===(i=(0,l.A)(v,this))||void 0===i||i.loadSource(t.src))}destroy(){var t,i;null===(t=(0,l.A)(v,this))||void 0===t||t.destroy(),(0,h.A)(v,this,null),null===(i=(0,l.A)(p,this))||void 0===i||i.call(this),(0,h.A)(p,this,null)}}function w(t,i){return new c.vP((t=>(0,c.BW)(t))(t),{detail:i})}function y(){if(!(0,l.A)(A,this).$state.live())return;const t=new d.e8((0,r.A)(g,this,b).bind(this));return t.start(),t.stop.bind(t)}function b(){var t,i;(0,l.A)(A,this).$state.liveSyncPosition.set(null!==(t=null===(i=(0,l.A)(v,this))||void 0===i?void 0:i.liveSyncPosition)&&void 0!==t?t:1/0)}function E(t,i){var s;null===(s=(0,l.A)(A,this).player)||void 0===s||s.dispatch((0,r.A)(g,this,w).call(this,t,i))}function T(t,i){const s=(0,r.A)(g,this,w).call(this,t,i);let e=-1;for(let o=0;o<i.tracks.length;o++){var n;const t=i.tracks[o],a=null!==(n=t.subtitleTrack)&&void 0!==n?n:t.closedCaptions,r=new d.to({id:"hls-".concat(t.kind,"-").concat(o),src:null===a||void 0===a?void 0:a.url,label:t.label,language:null===a||void 0===a?void 0:a.lang,kind:t.kind,default:t.default});r[d.Hp.readyState]=2,r[d.Hp.onModeChange]=()=>{"showing"===r.mode?((0,l.A)(v,this).subtitleTrack=o,e=o):e===o&&((0,l.A)(v,this).subtitleTrack=-1,e=-1)},(0,l.A)(A,this).textTracks.add(r,s)}}function S(t,i){var s;const e=null===(s=(0,l.A)(v,this))||void 0===s?void 0:s.subtitleTrack,n=(0,l.A)(A,this).textTracks.getById("hls-".concat(i.type,"-").concat(e));if(!n)return;const o=(0,r.A)(g,this,w).call(this,t,i);for(const a of i.cues)a.positionAlign="auto",n.addCue(a,o)}function L(t,i){const s=(0,l.A)(A,this).audioTracks[i.id];if(s){const e=(0,r.A)(g,this,w).call(this,t,i);(0,l.A)(A,this).audioTracks[d.jH.select](s,!0,e)}}function m(t,i){const s=(0,l.A)(A,this).qualities[i.level];if(s){const e=(0,r.A)(g,this,w).call(this,t,i);(0,l.A)(A,this).qualities[d.jH.select](s,!0,e)}}function W(t,i){i.details.totalduration>0&&(0,l.A)(A,this).$state.inferredLiveDVRWindow.set(i.details.totalduration)}function M(t,i){if((0,l.A)(A,this).$state.canPlay())return;const{type:s,live:e,totalduration:n,targetduration:o}=i.details,a=(0,r.A)(g,this,w).call(this,t,i);(0,l.A)(A,this).notify("stream-type-change",e?"EVENT"===s&&Number.isFinite(n)&&o>=10?"live:dvr":"live":"on-demand",a),(0,l.A)(A,this).notify("duration-change",n,a);const h=(0,l.A)(v,this).media;-1===(0,l.A)(v,this).currentLevel&&(0,l.A)(A,this).qualities[d.kW.setAuto](!0,a);for(const r of(0,l.A)(v,this).audioTracks){const t={id:r.id.toString(),label:r.name,language:r.lang||"",kind:"main"};(0,l.A)(A,this).audioTracks[d.jH.add](t,a)}for(const r of(0,l.A)(v,this).levels){var u,p;const t={id:null!==(u=null===(p=r.id)||void 0===p?void 0:p.toString())&&void 0!==u?u:r.height+"p",width:r.width,height:r.height,codec:r.codecSet,bitrate:r.bitrate};(0,l.A)(A,this).qualities[d.jH.add](t,a)}h.dispatchEvent(new c.vP("canplay",{trigger:a}))}function P(t,i){var s;if(i.fatal)if("mediaError"===i.type)null===(s=(0,l.A)(v,this))||void 0===s||s.recoverMediaError();else(0,r.A)(g,this,_).call(this,i.error)}function _(t){(0,l.A)(A,this).notify("error",{message:t.message,code:1,error:t})}function x(){(0,l.A)(v,this)&&((0,l.A)(v,this).currentLevel=-1)}function H(){const{qualities:t}=(0,l.A)(A,this);(0,l.A)(v,this)&&!t.auto&&((0,l.A)(v,this)[t.switch+"Level"]=t.selectedIndex,d.G_&&((0,l.A)(u,this).currentTime=(0,l.A)(u,this).currentTime))}function I(){const{audioTracks:t}=(0,l.A)(A,this);(0,l.A)(v,this)&&(0,l.A)(v,this).audioTrack!==t.selectedIndex&&((0,l.A)(v,this).audioTrack=t.selectedIndex)}var D=new WeakMap,C=new WeakMap,j=new WeakMap,R=new WeakSet;class N{constructor(t,i,s){(0,n.A)(this,R),(0,a.A)(this,D,void 0),(0,a.A)(this,C,void 0),(0,a.A)(this,j,void 0),(0,h.A)(D,this,t),(0,h.A)(C,this,i),(0,h.A)(j,this,s),(0,r.A)(R,this,$).call(this)}}async function $(){const t={onLoadStart:(0,r.A)(R,this,q).bind(this),onLoaded:(0,r.A)(R,this,K).bind(this),onLoadError:(0,r.A)(R,this,O).bind(this)};let i=await async function(t){var i;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,c.Kg)(t))return;null===(i=s.onLoadStart)||void 0===i||i.call(s);try{var e;if(await(0,d.k0)(t),!(0,c.Tn)(window.Hls))throw Error("");const i=window.Hls;return null===(e=s.onLoaded)||void 0===e||e.call(s,i),i}catch(o){var n;null===(n=s.onLoadError)||void 0===n||n.call(s,o)}return}((0,l.A)(D,this),t);if((0,c.b0)(i)&&!(0,c.Kg)((0,l.A)(D,this))&&(i=await async function(t){var i;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,c.b0)(t))return;if(null===(i=s.onLoadStart)||void 0===i||i.call(s),t.prototype&&t.prototype!==Function){var e;return null===(e=s.onLoaded)||void 0===e||e.call(s,t),t}try{var n;const i=null===(n=await t())||void 0===n?void 0:n.default;if(!i||!i.isSupported)throw Error("");var o;return null===(o=s.onLoaded)||void 0===o||o.call(s,i),i}catch(r){var a;null===(a=s.onLoadError)||void 0===a||a.call(s,r)}return}((0,l.A)(D,this),t)),!i)return null;if(!i.isSupported()){const t="[vidstack] `hls.js` is not supported in this environment";return(0,l.A)(C,this).player.dispatch(new c.vP("hls-unsupported")),(0,l.A)(C,this).notify("error",{message:t,code:4}),null}return i}function q(){(0,l.A)(C,this).player.dispatch(new c.vP("hls-lib-load-start"))}function K(t){(0,l.A)(C,this).player.dispatch(new c.vP("hls-lib-loaded",{detail:t})),(0,l.A)(j,this).call(this,t)}function O(t){const i=(0,d.rv)(t);(0,l.A)(C,this).player.dispatch(new c.vP("hls-lib-load-error",{detail:i})),(0,l.A)(C,this).notify("error",{message:i.message,code:4,error:i})}var V=new WeakMap,B=new WeakMap,U=new WeakMap;class F extends d.Nw{constructor(){super(...arguments),(0,o.A)(this,"$$PROVIDER_TYPE","HLS"),(0,a.A)(this,V,null),(0,a.A)(this,B,new k(this.video,this.ctx)),(0,a.A)(this,U,"".concat("https://cdn.jsdelivr.net","/npm/hls.js@^1.5.0/dist/hls",".min.js"))}get ctor(){return(0,l.A)(V,this)}get instance(){return(0,l.A)(B,this).instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return(0,l.A)(B,this).config}set config(t){(0,l.A)(B,this).config=t}get library(){return(0,l.A)(U,this)}set library(t){(0,h.A)(U,this,t)}preconnect(){(0,c.Kg)((0,l.A)(U,this))&&(0,d.TB)((0,l.A)(U,this))}setup(){super.setup(),new N((0,l.A)(U,this),this.ctx,t=>{(0,h.A)(V,this,t),(0,l.A)(B,this).setup(t),this.ctx.notify("provider-setup",this);const i=(0,c.se)(this.ctx.$state.source);i&&this.loadSource(i)})}async loadSource(t,i){(0,c.Kg)(t.src)?(this.media.preload=i||"",this.appendSource(t,"application/x-mpegurl"),(0,l.A)(B,this).loadSource(t),this.currentSrc=t):this.removeSource()}onInstance(t){const i=(0,l.A)(B,this).instance;return i&&t(i),(0,l.A)(B,this).onInstance(t)}destroy(){(0,l.A)(B,this).destroy()}}(0,o.A)(F,"supported",(0,d.m0)())}}]);
//# sourceMappingURL=768.b70962a5.chunk.js.map